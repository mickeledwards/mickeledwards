{% capture tocWorkspace %}
    {% comment %}
        Version 1.0.2

        "...like all things liquid - where there's a will, and ~36 hours to spare, there's usually a/some way" ~jaybe

        Usage:
            {% include toc.html html=content sanitize=true class="inline_toc" id="my_toc" h_min=2 h_max=3 %}

        Parameters:
            * html     (string) - the HTML of compiled markdown generated by kramdown in Jekyll

        Optional Parameters:
            * sanitize (bool)   : false  - when set to true, the headers will be stripped of any HTML in the TOC
            * class    (string) :   ''   - a CSS class assigned to the TOC
            * id       (string) :   ''   - an ID to assigned to the TOC
            * h_min    (int)    :   1    - the minimum TOC header level to use; any header lower than this value will be ignored
            * h_max    (int)    :   6    - the maximum TOC header level to use; any header greater than this value will be ignored

        Output:
            An unordered list representing the table of contents of a markdown block. This snippet will only generate the table of contents and will NOT output the markdown given to it

{% assign firstHeader = true %}
    {% if firstHeader %}{% assign firstHeader = false %} class="active" {% endif %}


    {% endcomment %}
    {% capture my_toc %}{% endcapture %}
    {% assign minHeader = include.h_min | default: 1 %}
    {% assign maxHeader = include.h_max | default: 6 %}
    {% assign nodes = include.html | split: '<section id="' %}
    {% assign firstHeader = true %}


    {% for node in nodes %}
        {% if node == "" %}
            {% continue %}
        {% endif %}
        {% assign _workspace = node | split: '"' %}

        {% assign html_id = _workspace[0] %}

        {% capture my_toc %}{{ my_toc }}
<li><a href="#{{ html_id }}"{% if firstHeader %}{% assign firstHeader = false %} class="active" {% endif %}></a></li>{% endcapture %}


        {% endfor %}


{% endcapture %}{% assign tocWorkspace = '' %}{{ my_toc | markdownify | strip }}
